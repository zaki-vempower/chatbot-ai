# AI Chatbot - Next.js Multi-Provider Chatbot

A powerful, full-featured chatbot application built with Next.js that supports multiple AI providers, user authentication, conversation history, and web crawling capabilities.

## 🌟 Features

- **Multi-AI Provider Support**: OpenAI GPT, Anthropic Claude, Google Gemini, DeepSeek, and Llama (Local)
- **User Authentication**: Secure registration and login system
- **Conversation Management**: Persistent chat history with SQLite database
- **Web Crawling**: Single URL crawling and bulk search-based crawling with SearXNG
- **Local AI**: Run Llama models locally with Ollama - no API keys required!
- **Beautiful UI**: Modern interface built with Material-UI components
- **Real-time Chat**: Responsive chat interface with typing indicators
- **Secure**: JWT-based authentication with password hashing

## 🛠️ Tech Stack

- **Frontend**: Next.js 15, React 19, TypeScript
- **UI Components**: Material-UI (MUI) with custom theming
- **Database**: SQLite with Prisma ORM
- **Authentication**: Custom JWT implementation
- **AI APIs**: OpenAI, Anthropic, Google AI, DeepSeek, Ollama (Local Llama models)
- **Web Crawling**: Custom crawler with cheerio + SearXNG integration

## 🚀 Quick Start

### Prerequisites

- Node.js 18+ and npm
- API keys for at least one AI provider (optional but recommended)

### Installation

1. **Clone and setup**:
   ```bash
   git clone <your-repo>
   cd chatbot-ai
   ./setup.sh
   ```

2. **Add your AI API keys to `.env.local`** (optional):
   ```bash
   # Optional - for cloud AI providers
   OPENAI_API_KEY="your-openai-key"
   ANTHROPIC_API_KEY="your-anthropic-key" 
   GOOGLE_API_KEY="your-google-key"
   DEEPSEEK_API_KEY="your-deepseek-key"
   ```

3. **Setup local Llama models** (optional but recommended):
   ```bash
   # Install and setup Ollama with Llama models
   ./setup-ollama.sh
   ```

4. **Start the development server**:
   ```bash
   npm run dev
   ```

5. **Open your browser**:
   Navigate to [http://localhost:3000](http://localhost:3000)

## 📖 Usage

### Getting Started
1. **Register**: Create a new account or login with existing credentials
2. **Choose AI Provider**: Select your preferred AI model from the dropdown
3. **Start Chatting**: Begin a conversation with your AI assistant

### Local AI with Llama (No API Keys Required!)
1. **Setup Ollama**: Run `./setup-ollama.sh` to install and configure local Llama models
2. **Select Llama Provider**: Choose "Llama (Local)" from the AI provider dropdown
3. **Chat Locally**: Enjoy AI conversations without any API costs or internet dependency
4. **Available Models**:
   - `llama2:7b-chat` - Optimized for conversations (default)
   - `codellama` - Specialized for programming assistance
   - `llama2` - Standard Llama2 model

### Web Crawling
1. **Navigate to Crawler**: Click "Web Crawler" in the sidebar
2. **Single URL Crawling**: Enter any website URL and click "Crawl Website"
3. **Bulk Search Crawling**: 
   - Set up SearXNG: Run `./setup-searxng.sh` (requires Docker)
   - Enter search queries like "AI news" or "machine learning"
   - Click "Bulk Crawl" to automatically crawl up to 20 relevant websites
4. **Manage Content**: View, delete, and organize all crawled pages in the table

### Managing Conversations
- **New Chat**: Click "New Chat" to start a fresh conversation
- **View History**: Access all your previous conversations from the sidebar
- **Delete Chats**: Remove conversations you no longer need

## 🔧 Configuration

### Environment Variables

```bash
# Database
DATABASE_URL="file:./dev.db"

# Authentication (auto-generated by setup.sh)
NEXTAUTH_SECRET="your-generated-secret"
JWT_SECRET="your-generated-jwt-secret"

# AI API Keys (optional - for cloud providers)
OPENAI_API_KEY=""
ANTHROPIC_API_KEY=""
GOOGLE_API_KEY=""
DEEPSEEK_API_KEY=""

# Local Ollama Configuration (for Llama models)
OLLAMA_HOST="http://localhost:11434"
OLLAMA_MODEL="llama2:7b-chat"
```

### Database Schema

The application uses SQLite with Prisma. Key models:
- **User**: Authentication and user management
- **Conversation**: Chat sessions
- **Message**: Individual chat messages
- **CrawledData**: Stored website content
- **ApiKey**: AI provider configuration

## 🔐 Security Features

- **Password Hashing**: bcrypt with salt rounds
- **JWT Tokens**: Secure session management
- **Input Validation**: Zod schema validation
- **SQL Injection Protection**: Prisma ORM
- **XSS Protection**: React's built-in protections

## 🎨 UI Components

Built with shadcn/ui for a consistent, accessible design:
- Responsive layout that works on all devices
- Dark mode support (extendable)
- Loading states and error handling
- Toast notifications for user feedback

## 📁 Project Structure

```
src/
├── app/                 # Next.js app router
│   ├── api/            # API routes
│   │   ├── auth/       # Authentication endpoints
│   │   ├── chat/       # Chat functionality
│   │   ├── conversations/ # Conversation management
│   │   └── crawl/      # Web crawling
│   └── page.tsx        # Main application
├── components/         # React components
│   ├── ui/            # shadcn/ui components
│   ├── AuthForm.tsx   # Login/register form
│   ├── ChatInterface.tsx # Main chat UI
│   └── Sidebar.tsx    # Navigation sidebar
└── lib/               # Utility libraries
    ├── ai.ts          # AI provider integrations
    ├── auth.ts        # Authentication utilities
    ├── crawler.ts     # Web crawling logic
    ├── prisma.ts      # Database client
    └── utils.ts       # General utilities
```

## 🔌 API Endpoints

### Authentication
- `POST /api/auth/register` - User registration
- `POST /api/auth/login` - User login

### Chat
- `POST /api/chat` - Send message and get AI response

### Conversations
- `GET /api/conversations` - Get user's conversations
- `GET /api/conversations/[id]` - Get specific conversation
- `DELETE /api/conversations?id=[id]` - Delete conversation

### Web Crawling
- `POST /api/crawl` - Crawl and store website content

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature-name`
3. Make your changes and add tests
4. Commit your changes: `git commit -m 'Add feature'`
5. Push to the branch: `git push origin feature-name`
6. Submit a pull request

## 📝 License

This project is open source and available under the [MIT License](LICENSE).

## 🆘 Support

If you encounter any issues:

1. Check the [Issues](https://github.com/your-repo/issues) page
2. Ensure all environment variables are set correctly
3. Verify your AI API keys are valid
4. Check the console for error messages

## 🎯 Roadmap

- [ ] Voice input/output support
- [ ] File upload and processing
- [ ] Advanced conversation search
- [ ] Team collaboration features
- [ ] Custom AI model integration
- [ ] Mobile app development
